# Openstack-exporter

Exporter для Prometheus.

## Почему написан свой

Свой Openstack-exporter был написан из-за необходимости сбора кастомных метрик.

## Как работает

Результатом CI/CD является Docker-контейнер, который сохраняется в реджестри проекта.

Для работы exporter должен иметь файл **confing.yaml** в папке **/etc/openstack-exporter/**  
Для запуска exporter можно воспользоваться **docker-compose.yml**.

## Конфигурационный файл

Конфигурационный файл имеет следующую структуру.  

```yaml
cluster_name: - имя кластера
port: - порт, на котором будет висеть экспортер
openstack:  
    username: - име пользователя Openstack, который будет использоваться для доступа в API
    password: - пароль пользователя
authurl: - URL Keystone для аутентификации
horizon_url: - URL Horizon
probe_period_sec: - период опроса API Opentack
```  

В данный момент нет значений по умолчанию, из-за этого **все поля должны быть заполнены.**

## Метрики

Какие метрики собирает:  

- Доступность API:
  - Nova
  - Cinder
  - Keystone
  - Glance
  - Neutron
- Статус и состояние сервисов/агентов:
  - Nova
  - Neutron
  - Cinder
- Использование RAM и CPU по гипервизорам
- Выданая квота и использование ресурсов по проектам:
  - Nova
  - Cinder
- Статусы ВМ по проектам
- Доступность Horizon(проверка логина в Horizon)